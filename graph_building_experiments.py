from matplotlib import pyplot as plt
import numpy as np
import time
from main import (
    LANDING_PAD_BUILDING_TYPE,
    Graph,
    create_all_possible_tubes,
    create_all_possible_pods,
    GraphBuilder,
    LunarMonthData,
    get_pod_path_coordinates,
)

test_cases = dict(
    grid_tick_0=b'x\x9c\xdd\x9aAn\xeb8\x0c\x86\xafRd\xdd\x85)K\xb6<W\x19\x14\x83\xcek1(\xf0\xd0\x14i\xbax(z\xf7I\x1c\x9bt\xac\x8f:\x80\xbaq\x90R\x92I\xfe$\x7f\x91\xf9>\x9c^?\x8f_\xa7_\xaf\x9f\x87\xbf\x1e\xa4\xbb\xfe=>\x1c\xce\xa7\xe7\xf7\xcf\x8f\xe3\xe9\xfc\xcf\xef\xb7\xf7\xf9_\x7f?]\xbe\xfe8\xbe\xe8\xe7\x7f\xbf\xde~\xbf\xbc\xbd\xff7\x7f\xf1}8\xff\xf9x\xbd|\xba.~{Y>\xfc:\x1eO\x17\x91\xe7\xf3m\x87)=>\xa4t]\xfb\xfcy>\x1d\xdf\x9f\xbf\xce\xd7\xef\xbf\x0fr=\xfa\xf2uX\x9e\xfd\xf2\x8c\xcb3-\xcfay\x8e\xcb3/\xcfiyJ\xb7~Xw\x94uKY\xf7\x94uSYw\x95u[Y\xf7\x95ucYw\x0e\xf3\xce??\x8f\x0f\xaa\xe9\xb4j*\xa5\xa6r\xd1T\xd2\xd3V\\d\x95\x0f\x8ee\xee\xc5\xc3*\xde\xc3\xf6\xf1"?\xde/P\xc3G\x90\xef/\xf2}3\x967S&\xd0\xb5\xbb\xa1\xecnA\\\x17\x0c\xe5\x82P\xdaR\xd4\xb7c)\x0f\xdb\xa7U<3\x14\xf2N~\x15\x9fp\xf7\xe1^\xbaW\x9cAH\xcd\xda\x86\xfb\x05\x8a\x1c!d\x86\xf2\x04[\x00\xd0\xecK\xf3\xa85\x85\xb0y\x83\xda\x9d\xbe\x8aM!p&\xb0\xa8\xbd\x12\xb98\x96gd]\x00.\x9e\xf1\xbf;a\xd4\x05\xe0c0\x92\x85;89\x94\xfb\xab8;y\xef35Qp\x12\xe7\xde\xa6\x83.\x00/\xe7r\x81\xbe\x7fp\xf2\xcfN_Q\x8b\x06\xf0\xf2U\xe1x\xbf@\x83 \x80\x93{\x88\x02\xf5q \x1f\xf7\xe5\t\x86\xa3\x00N\xce\xa5\x0f\xccF\x8e\x8f\x83g#\ndJ\xea\xba\x00\xbc\x1c+ \xea)\x96S\xa1\x81\xc9S(\xf7\x108\xfaF=\xb8YJ\x9b\xaaI{\x8c\xe5\x9b\xca\x8d\xd4\r\xcd[= \xb4\x02\xe8\x1e\xf0\xd9\x97`\xb0\x18\xee)\x07ue\x08\xd8\t\x80\xcf\xb1\xe6,\xc2gl\x8a^m\x08\x10\xc4\xd6\x8c}/z#\x04W.\xe55;D\x08\xaeT\t\xf6H\xa1\xd5C\n\xd5\x05\x10[\xa9\x96\x11#\x01\xb4\x92N"e\xd0\x00\'(\xe2"@4\x966\xd2*\x19\x01\xa1\x02\xafd\x0b<\x88\x0e\x0e\xa6#\xb8y\xbc\xbdQ+\x90V]\x13 4\xd4\xb2y\x02\x88\x0e\xa5\xbb\xach\'\xc0\xe8\x004B\xfd\x95\x9c*\xbf\x0b\x02;\x00 \n\xbcL\xd9k\xf2\x8a\xfc\x9e{\x9b\xce\x94E\x8b\x12iY79It\xf7FZ\x05\x92\x87\xd0}\xdc\x9b\x0e\x00Q\x882\xbbm\x80\x9b\xcb\xfd5&\x07p\xf2T\xbbI\x0e\x0e_\xf7\xca\xc6@5~!\x05\x8d\xc4\x98\x19\x13\xf09\xc0\xdd\xc7\x8cC\x00\x95\x12\xa0Z6\x06\xc2\'\\\x7f\xec\x04\x00h\xbe\xc1\xa7\x11\xebo\xacI\xc1\x15j\xc6\xa1*\x7f\xb3~#\xc6Q\xe0\x8c\x90\x16(\xefX\x17\x82\xd8\x7fW1\xe6\x08\x89al\x8a\xcbk\x9c\x8f\x90\xd32\x94R\x95g\xee?:ek\x84\xac0A\xd5RyJ\nPG\xed\x00H\n\xd0\xde3}\x9d\x1e\xd3\xe0\xc9S\xff\x01\x98\x83r\xcf\x0c\xe8\x1cK\x83*q\xc8\x04N\xb8\x1e)s\xc8\x00\xceXVQ\r\x97\xecu@\xb3\xf7F\xd4e\x82\x8e\x85:-\x83\x93\xcb\xcb\xb8\xd5\xdd\xec9y\x0f:\xd3\x19\xbc\x0cW\x98\xcd\x11N\x97\xc9\xa3W\x99\xd2\'\xb4\xa5\xd4\xcd\x93sI\xf2\xb8\xc3\x04n\xceM\xe5g3\xfe\x84\xbd\x93\x12q\xea\xde\xc9k\x9e\xb8\xfc|"\x8cv\x85\xbf\x94JN\x1e;\xf1\xf8\xfc\x04\x18\xa5\x86\x91\x01\x02 :@\xd0(\xe4&\x80h\xaa.\x00\x8c\xe6\xca\x15R:\xea\x92A\xdf\xce\x1a}\xd2\x01L\xc7\xd2L\xd6\x91\xee\xc0\xd7\x85\xfcF\x1c<=5\xc5\xa07\xba\x12F\xe7.S+\xba\x86\x8d\xb2\x14`\t*\xfd\x06\x9eN\x0f\xc5K\xa1\xd2a\x13\xa5\xa9\xae\x9d\xe9J<\xa5\xab\xf4\x7f\xa4s\x98JC\x15Fu\xa5Y\xdeT\xe1@B\xb3\xbc\xb1fM\x9a\xe5\x8dM]67\xbaR\xf9\xed\xda\x82\x8e\xcd\x1fi\x88:T\x98\x9e\xd0\x0c5\x02\x15\xb0\xccFC\xd4\x92|n\xd0\xe9u\x87\xf7\xedF\x1bf\xd3\x18u~\xd3\xe00\\\xa1Ij9\xd85yo\x92\xea\x1e@\x93T\x81\x84naL\xb3T\x816\xfaf\xc2\x0eP\xedk\xe3l\x9a\xa6Bc\xdf|A\xd3\xd4X!\x8aB\xc3T\x81_El\x0c\xe5P\xc5\xe4\x90W\xc1y*q\xc5\xcd[9\xfd\xa0\xe0%<\x1a\xa9.\x10l$\x07lt%\xa4\xb6\xc5$6\xca:]\xee\xa1\x19]m,\'4\x86\x1f\xcax\xdf\x10W\x1cf\xd7\x82\x91\xc6\xd9\x02?S\xda\x1c\x01\x19bh\xaa\x9dhy\x87F\xf1\x02\r\xb6\xcd\x15\x92\xa6\xf1\xb9l\x80Y\x05\xa7\x89\xf6P&\\\xab\x1a4\xd1\x9e\t\xce>\x7f\x9a\x97i\xa8-\xf03\x1c\xab48\xd6\xeej}i\xa1\xc1\xf6\xb8(\xf2\xf4\xf3?*\x1dYv',
    grid_tick_1=b"x\x9c\xdd\x9aAn\xeb8\x0c\x86\xafRd\xdd\x85)K\xb6<W\x19\x14\x83\xcek1(\xf0\xd0\x14i\xbax(z\xf7I\x1c\x9bt\xac\x8f:\x80\xbaq\x90R\x92I\xfe$\x7f\x91\xf9>\x9c^?\x8f_\xa7_\xaf\x9f\x87\xbf\x1e\xa4\xbb\xfe=>\x1c\xce\xa7\xe7\xf7\xcf\x8f\xe3\xe9\xfc\xcf\xef\xb7\xf7\xf9_\x7f?]\xbe\xfe8\xbe\xe8\xe7\x7f\xbf\xde~\xbf\xbc\xbd\xff7\x7f\xf1}8\xff\xf9x\xbd|\xba.~{Y>\xfc:\x1eO\x17\x91\xe7\xf3m\x87)=>\xa4t]\xfb\xfcy>\x1d\xdf\x9f\xbf\xce\xd7\xef\xbf\x0fr=\xfa\xf2uX\x9e\xfd\xf2\x8c\xcb3-\xcfay\x8e\xcb3/\xcfiyJ\xb7~Xw\x94uKY\xf7\x94uSYw\x95u[Y\xf7\x95ucYw\x0e\xf3\xce??\x8f\x0f\xaa\xe9\xb4j*\xa5\xa6r\xd1T\xd2\xd3V\\d\x95\x0f\x8ee\xee\xc5\xc3*\xde\xc3\xf6\xf1\"?\xde/P\xc3G\x90\xef/\xf2}3\x967S&\xd0\xb5\xbb\xa1\xecnA\\\x17\x0c\xe5\x82P\xdaR\xd4\xb7c)\x0f\xdb\xa7U<3\x14\xf2N~\x15\x9fp\xf7\xe1^\xbaW\x9cAH\xcd\xda\x86\xfb\x05\x8a\x1c!d\x86\xf2\x04[\x00\xd0\xecK\xf3\xa85\x85\xb0y\x83\xda\x9d\xbe\x8aM!p&\xb0\xa8\xbd\x12\xb98\x96gd]\x00.\x9e\xf1\xbf;a\xd4\x05\xe0c0\x92\x85;89\x94\xfb\xab8;y\xef35Qp\x12\xe7\xde\xa6\x83.\x00/\xe7r\x81\xbe\x7fp\xf2\xcfN_Q\x8b\x06\xf0\xf2U\xe1x\xbf@\x83 \x80\x93{\x88\x02\xf5q \x1f\xf7\xe5\t\x86\xa3\x00N\xce\xa5\x0f\xccF\x8e\x8f\x83g#\ndJ\xea\xba\x00\xbc\x1c+ \xea)\x96S\xa1\x81\xc9S(\xf7\x108\xfaF=\xb8YJ\x9b\xaaI{\x8c\xe5\x9b\xca\x8d\xd4\r\xcd[= \xb4\x02\xe8\x1e\xf0\xd9\x97`\xb0\x18\xee)\x07ue\x08\xd8\t\x80\xcf\xb1\xe6,\xc2gl\x8a^m\x08\x10\xc4\xd6\x8c}/z#\x04W.\xe55;D\x08\xaeT\t\xf6H\xa1\xd5C\n\xd5\x05\x10[\xa9\x96\x11#\x01\xb4\x92N\"e\xd0\x00'(\xe2\"@4\x966\xd2*\x19\x01\xa1\x02\xafd\x0b<\x88\x0e\x0e\xa6#\xb8y\xbc\xbdQ+\x90V]\x13 4\xd4\xb2y\x02\x88\x0e\xa5\xbb\xach'\xc0\xe8\x004B\xfd\x95\x9c*\xbf\x0b\x02;\x00 \n\xbcL\xd9k\xf2\x8a\xfc\x9e{\x9b\xce\x94E\x8b\x12iY79It\xf7FZ\x05\x92\x87\xd0}\xdc\x9b\x0e\x00Q\x882\xbbm\x80\x9b\xcb\xfd5&\x07p\xf2T\xbbI\x0e\x0e_\xf7\xca\xc6@5~!\x05\x8d\xc4\x98\x19\x13\xf09\xc0\xdd\xc7\x8cC\x00\x95\x12\xa0Z6\x06\xc2'\\\x7f\xec\x04\x00h\xbe\xc1\xa7\x11\xebo\xacI\xc1\x15j\xc6\xa1*\x7f\xb3~#\xc6Q\xe0\x8c\x90\x16(\xefX\x17\x82\xd8\x7fW1\xe6\x08\x89al\x8a\xcbk\x9c\x8f\x90\xd32\x94R\x95g\xee?:ek\x84\xac0A\xd5RyJ\nPG\xed\x00H\n\xd0\xde3}\x9d\x1e\xd3\xe0\xc9S\xff\x01\x98\x83r\xcf\x0c\xe8\x1cK\x83*q\xc8\x04N\xb8\x1e)s\xc8\x00\xceXVQ\r\x97\xecu@\xb3\xf7F\xd4e\x82\x8e\x85:-\x83\x93\xcb\xcb\xb8\xd5\xdd\xec9y\x0f:\xd3\x19\xbc\x0cW\x98\xcd\x11N\x97\xc9\xa3W\x99\xd2'\xb4\xa5\xd4\xcd\x93sI\xf2\xb8\xc3\x04n\xceM\xe5g3\xfe\x84\xbd\x93\x12q\xea\xde\xc9k\x9e\xb8\xfc|\"\x8cv\x85\xbf\x94JN\x1e;\xf1\xf8\xfc\x04\x18\xa5\x86\x91\x01\x02 :@\xd0(\xe4&\x80h\xaa.\x00\x8c\xe6\xca\x15R:\xea\x92A\xdf\xce\x1a}\xd2\x01L\xc7\xd2L\xd6\x91\xee\xc0\xd7\x85\xfcF\x1c<=5\xc5\xa07\xba\x12F\xe7.S+\xba\x86\x8d\xb2\x14`\t*\xfd\x06\x9eN\x0f\xc5K\xa1\xd2a\x13\xa5\xa9\xae\x9d\xe9J<\xa5\xab\xf4\x7f\xa4s\x98JC\x15Fu\xa5Y\xdeT\xe1@B\xb3\xbc\xb1fM\x9a\xe5\x8dM]67\xbaR\xf9\xed\xda\x82\x8e\xcd\x1fi\x88:T\x98\x9e\xd0\x0c5\x02\x15\xb0\xccFC\xd4\x92|n\xd0\xe9u\x87\xf7\xedF\x1bf\xd3\x18u~\xd3\xe00\\\xa1Ij9\xd85yo\x92\xea\x1e@\x93T\x81\x84naL\xb3T\x816\xfaf\xc2\x0eP\xedk\xe3l\x9a\xa6Bc\xdf|A\xd3\xd4X!\x8aB\xc3T\x81_El\x0c\xe5P\xc5\xe4\x90W\xc1y*q\xc5\xcd[9\xfd\xa0\xe0%<\x1a\xa9.\x10l$\x07lt%\xa4\xb6\xc5$6\xca:]\xee\xa1\x19]m,'4\x86\x1f\xcax\xdf\x10W\x1cf\xd7\x82\x91\xc6\xd9\x02?S\xda\x1c\x01\x19bh\xaa\x9dhy\x87F\xf1\x02\r\xb6\xcd\x15\x92\xa6\xf1\xb9l\x80Y\x05\xa7\x89\xf6P&\\\xab\x1a4\xd1\x9e\t\xce>\x7f\x9a\x97i\xa8-\xf03\x1c\xab48\xd6\xeej}i\xa1\xc1\xf6\xb8(\xf2\xf4\xf3?*\x1dYv",
    village=b'x\x9c\x8d\x96\xdd\x8e\xe20\x0c\x85_\xa5\xeau/j\xe7\xa7\xe9\xbe\xca\n\xad\x98\x01\xad\x90F\x14\x95r1B\xbc\xfb&\x81\xba\xd3\xe6\x18\xed\x15U\x89]\xe7\xe4\xf3\x89\xef\xf5x\xbc\x0e\xb7\xf1\xf3x\xad\x7fU\xaem\xdb\xa6\xaa\xa7q\x7f\xbe^\x86q\xfa\xf3u:\xe7?~\xef\xe2\xeb\xcbp\x90\xe7\x8f\xdb\xe9\xebp:\xff\xcd/\xee\xf5\xf4}9\xc6\xa7\x14|:\xbc\x1e>\x87a\x8cK\xf6\xd33\x83\xe1\xa62\x9cb\xf7\xd7i\x1c\xce\xfb\xdb\x94\xde\xdfkr\xf1\x87\xe2{\xb2\xe9\xe1\xf1h*Ih\xe6\x84T&$c\x9b\x8ax\xf7s\xbd\x14\xc0\xe5z\xdb\xe6\xe5e\x01V\xff>\x859\xa1\x01\x05\x90k*gW\x05P?\x07\xd82\xa0\x8f\x7fz\xa5`W.\xe7\x98\x82[\xa4\xd8\xab\xe0\xb2^I\xe7\xf1\xfe9\xa0t\xe6\x95/\x14\xf9\xba9_\xa7\xe8\xef\xd7\xbb\x97\xf3\n`=\xc7\x7f\xbd\xc7\xdb\xef\x95\xed\xc3zy>0\xa3\x0b@\x00A\x1b4\x04g\x05\xca\x84d%#b0!\x106"\xb0D\x00\n\xb3\n\xdd\x1a\x1a/\x01\x88\xb2|n\x9d\xf6\t\x80Y.\xaa\x0b\xab\x88%\x00\x80\x96?\xd1\xe3\x83!DR\xd4\x91\xed;\x1dA+-\x19\x01K\xc9\x1c\xc8\xa3\x8c\xd2\x9cT\x1e\x8d\xd0I\x08\xb7\xb6+ps\x12\x00x\xcb<\xb3U\x80f\xc0S\xfeDX7\xb4\x18\x06#\\8\xa8B3\x80\x85\xadbY\xdd\x1b\xcb\x12\x9aX\xf3,\xcd\x83\x18\xc0\xe4\xbc\xd6\x85\xed\xff\x9c\x0c#\xdc\x92l\x9b\x16X\xda\x8c\x01p\xb9i6B\x8b\xd12\xf2\xa6$4\xb9u\x0b,\xfb\x04\xb8$o\xde\xf4\x0c\t.\x0cq\x89\x9b\xef\xda\x1d\xd6\xde \\R\x84\xa6\xbd\x01\xb8\xa4>\x83\xd2\xcf\x17\xc0\xf3\x0c\x1eP\x16\x83\xcc\xc7q!\x0b-% ^R\x84B\xac\x01\xb8$\'1\xa8\x91\xe5\x92\xe7\xa2d\xf1&\xa3y\x13\x93R\x01`%\x01\x0b{F\xcc\xa9+y]TC0%^\xdd\x9a\r\xc1\xd5 \xeb\xc9\x93I\xc0\xd6c\x10K\xd6o\xafR!\xc9"\x92\xb2\xcc\n\xac\x16\xceJT\xe2-Ve\xb5{j\xb3i\xd1\xdd\x02R\xb2Q\xa0iE\xee\x847\xb7\xb5\x05(%\x80\x11\xfd\xfe\x95\xaf/\xd2\x89Y[\x08\x92/\x0eeQ\x00\x99NB\x7fC\x1eI\x00\xe2$O\x98N\x91\x0cp\x92\xd1F\x92\x85Y\xb2\xb2W\x96\x84\x80\xa3lb-.\xc0)39\xbc\xc8\x8d\xaa1\x89\x04N\x9b\x87\xd4\n\xd0P\x1e\xb4\x8b\xbf\xa4E.\x15\x07\xc7$_\xde\xde\xcb\xa7\xd1\x98\x94\xae\x81\xcd\xf9J[;\x95 m~W&n8&\xcd\x03\xac\x7f\xeeq\xf7\xf8\x07\xeex\xb8\xe1',
    example_1=b"x\x9ce\x8c\xd1\n\xc3 \x0cE\x7fE|\xee\x83\xba1\xc6~e\xc8pU\x86P\x8c\xc4\xf4a\x88\xff\xde\xd8\xb5e\xd0\x97\xe4rrs\xaa\xc4P`\xc61\x14\xf9\x10F)5\x08I\xe8R\xc9\x80\xf4\x9abZ\x0fO\xcb8\x83?\xf2{\x8e\x93\x8f\xe9\xb3\x82*\xe9\x9b\x03\xa7\xfe\x1c\xfd\x16F\x00\xe4\x8a\xa3\x9f\xe1\xce\xec\xa6\xfa\xaf+\x84\x90\xdcL\x9dW\xa9yj\xc6\xa6\xef\xd6\x06q\xe8\xf4\xae\xd3g\xdd\x95u\x17e\xff\xebf\xaf\x9bs]\x9b\xado\xdb\x02\xa2UF\x8c",
    crater=b'x\x9cm\x8d\xcb\n\xc3 \x14D\x7f%\xb8\xce\xc2k+-\xfd\x95"\xc5F)BP\xf1\xb1(\xe2\xbf\xe7\x9a\x90lt7\xcc\x1c\xce\x14\x12tt9,:\x92\xd7\xc4)\xa5\xf3DR\x906z\x17\xd2g5v\x1f\xde\x02k\xef\xd4\x95\xbf\xd9\xac\xca\xd8\xdf^\x14\x92\xfe^cb\xb8\x18\x85\xa1Y\x16\xe7\x02"2\x1d\x86\'v\x0f.\xea<]8=q\x18\xe3\xc0\xdb\x95\x8c)8+sj}!\xac\xf1u\xa8a\xbd\x06\x00\xd7\xfb\xc8\x03\x9d\x07N\xcf\xad\xf7\xf0CSE\xdd\x00\xca\xb0Y\xa0',
    pairs=b"x\x9c\xcdV\xcb\x8e\xe20\x10\xfc\x15\xc4y\x0ei\xbf\xb3\xbf\xb2B(\x0bh\x15iDP\x08\x87\x11\xe2\xdf\xb7\x9d!\x1e\xa4./&\x82\xd1\x9cl\x8c\xdb]\xd5\xa9~\x9c\x97\xfd\xee\xd8\x9d\xfa\xcd\xee\xb8\xfc\xb5\xb0\xd6T\xf5\xdbb9\xf4\xcd\xfex\xe8\xfaa\xfd\xde\xee\xc7\x7f~\x9f\x97\x7fN\xed\xfb\xb6\xdd\xff]\xb7\xdb5\xf1\x91\xe1\x8b\xb7g\x8a\xcf4\x9fm\x9aC\xb3i\x87\x0f\xfeI\x97\xb7\x854\xac\x80!\xcd5T%\x86\x0e\x18\x86\x12\xc3\x80\xa0\x16aU\x1e\x98\xba\xd9\xe11%\x96\x1aXV%\x86\x16\x18\x16y\xa4\xb9_\x04A\xb5%\x86\xf5\xec/\x82\xb0\x16\x91D\xd1)R\x0f\xf2XD\x12\x19\x16i\x07A-\x8b\x0e\x8ck\x19K\xe4T\x15\xf1D9\xa2\x8aj\x08\xa1\xeaS\xa4<Rs\xeb\x16\xcd\xaf\x06\x08mQf\xa2\xca5\x9ff=\xdb\x92\x04\xda\x15\x1f\x1c\xba\xed\xd8\x1cV7\x16\xd7n1|\x1cvW%\xb7\xdb\x89m\xd7\xf5|\xa5\x19>[\nU\xcc\xae^\x8d \xae\xd7\xab\xe9:\xa1\xeb\x1cE\xed\xa3\xaf\xe68\xf4\xdd\xbe9\r\xf1\x8f\xf3rD}\xb9}GM\xef(\xf0\x8e\xe1\xefH\x15\xf6\xab\xe5}\xc3*%\x9ds\xcb\xc7J\xb8\xd7\xd3sF>W\xb3\teX[\xe0\x9dc\xe4\xdc=\xef\xbcj\x81\xc2L\xcf:\x10\x84\xf8A\x8d\xc60\xbc\xbc\xaf>cV\x08\x83W#\xe0\xd8\xe9\xf9\x00\xe0X\x96\xa6q\x18N\x8d\xb4\xc0\x8f\x04\xfb(\x1e^\xad\xc0\xe5\x92\xe6\x80F\x15\x9f\xd9\x8cV\x08\x88\xb4f\x96\xde\xcc\xc5\xc5\xab\x13\xf8|\xf2\x87\xc4\xcchB\xc8\xe0\x03bv,\nuW\xcc\xf7\xf0\xf1\xea\x05\xce\x90\xfc\x02\xd5\x936\xf9\\\x07\xb2\xd7\xcc5\x14\xcb\xfe\x1eN^\x83\xc0['\xff(?\"\x002\x19\xc0 A\xc6\x84r\xd9\xea4\x171\xaf\xb5@N_H@.\x85j\x94 F\x8erI\xf1\xa1\x9d\x9dK\xf7\x90\xf3J\x95\xa4\x90\x1a\x83B\x9d\xc1r\x84m\x86\x83\x02i\xe7\xd4x\xff\xd5\x14\xe2F6\x1b\xfa\xea6(C9\x0b\xbd\xcfP\x01\x19\xeaY\x8d\xe1\xfb\x98\xc4\x8dl`\x94:\x98B\xc9\\\xb1\x99\xca}\x1e\x90\xcd\xb1\xba\x87o\xfc<\x89T\xdc\xc8\xc6H\xa93*\x98\xfa>\xdf\x1a\x15J}\x1b\x8b\xea\xd3\x8b\xd5#\xf4\xe2Fv\\J-W\xc1\x9e\xcb\x87\x8e2<A\xa10\xec\xc6\xa8\x1fA3nd'\xa7\xd4\xca5**:\xf6\xe6\x0c_\r\x8aJ\x8c\x81{}]|\x88o\xdc\xc8\x11\x81\xd2\x8c\xa0A\x05\n\x1c\x16\x93\x99\x114\xa8@d\xdd+\x9a\xef\x93\x88\xc7\x8d\x1c>(M\x1f\x1a\x14,\xaf\xff\x13\x01P\xaf\xd4\xcf\x13\xba\xe4\x1f7r\xaa\xa14\xd6hX\xdb\x98\xad\xcd\xe5\x00\x9a\xfb\x9f9.\xbe<\x12qs\x1d\x97V\x97\x7f\xd0\xd2gN",
)

data = LunarMonthData.from_compressed_string(test_cases["grid_tick_0"])
graph_builder = GraphBuilder()
t0 = time.perf_counter()
graph = graph_builder.build_transport_lines(data, Graph([]))
t1 = time.perf_counter()
paths, remaining_resources = create_all_possible_tubes(int(100000), graph)
print(f"remaining_resources: {remaining_resources}")
print(f"built {len(paths)} paths")
t2 = time.perf_counter()
coordinates = data.get_building_coordinates()
while len(graph.routes_to_build) > 0:
    graph.build_next_route()
pod_actions, remaining_resources = create_all_possible_pods(int(1e10), graph, [])
t3 = time.perf_counter()


print(f"Graph building: {t1 - t0:.6f}s")
print(f"Tube building: {t2 - t1:.6f}s")
print(f"Pod building: {t3 - t2:.6f}s")


plt.gca().invert_yaxis()
plt.plot(coordinates[:, 0], coordinates[:, 1], "o")
for i in range(len(coordinates)):
    plt.text(coordinates[i][0], coordinates[i][1], f"{i}")

assert graph.adjacency_matrix is not None
adjacency_matrix = graph.adjacency_matrix

for i in range(len(coordinates)):
    for j in range(i + 1, len(coordinates)):
        if np.isinf(adjacency_matrix[i][j]):
            continue
        plt.plot(
            [coordinates[i][0], coordinates[j][0]],
            [coordinates[i][1], coordinates[j][1]],
            "k--",
        )
        plt.text(
            (coordinates[i][0] + coordinates[j][0]) / 2,
            (coordinates[i][1] + coordinates[j][1]) / 2,
            f"{adjacency_matrix[i][j]:.2f}",
        )

for action in paths:
    building_1 = action.building_1
    building_2 = action.building_2
    plt.plot(
        [building_1.coordinates[0], building_2.coordinates[0]],
        [building_1.coordinates[1], building_2.coordinates[1]],
        "r-",
    )

for building in data.buildings:
    if building.type != LANDING_PAD_BUILDING_TYPE:
        continue
    plt.plot(building.coordinates[0], building.coordinates[1], "ro", markersize=15)

for pod_action in pod_actions:
    pod_path = get_pod_path_coordinates(pod_action, data.buildings)
    plt.plot(pod_path[:, 0], pod_path[:, 1], "g-")

plt.legend()
plt.show()
